<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="{% static 'index.css' %}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="{% static 'toast.js' %}"></script>
    <script>
        $(document).ready(function () {
            let serverMsg = "{{ msg|default:'' }}";
            let serverError = "{{ error|default:'' }}";
            let status = "{{ status|default:'info' }}";
            let activeTab = "{{ active_tab|default:'login' }}";

            if (activeTab === 'signup') {
                $('a[href="#signup"]').click();
            } else {
                $('a[href="#login"]').click();
            }

            if (serverError) showToast(serverError, 'error');
            if (serverMsg) {
                showToast(serverMsg, status === 'success' ? 'success' : 'error');
            }
        });
    </script>
    <script src="{% static 'index.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="left-section">
            <div class="login-box">
                <!-- Tab Navigation -->
                <ul class="nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="#login">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#signup">Sign Up</a>
                    </li>
                </ul>

                <!-- Login Tab -->
                <div id="login" class="tab-content show">
                    <form method="post" action="login">
                        {% csrf_token %}

                        <div class="form-group">
                            <input type="text" id="userName" name="username" placeholder=" " value="{{username}}"
                                required>
                            <label>Username</label>
                        </div>

                        <div class="form-group password-group">
                            <input type="password" id="password" name="password" placeholder=" " required>
                            <label>Password</label>
                            <span class="fa fa-fw fa-eye field-icon toggle-password" style="
    top: 20px;"></span>
                        </div>

                        <button type="submit">Login</button>
                    </form>
                </div>

                <!-- Sign Up Tab -->
                <div id="signup" class="tab-content">
                    <form method="post" action="register_user" id="signupForm">
                        {% csrf_token %}

                        <div class="form-group">
                            <input id="signup-username" type="text" name="username" placeholder=" " autocomplete="off"
                                value="{{ signup_username|default:'' }}" required>
                            <label>Username</label>
                            <div id="usernameMsg" class="validation-msg"></div>
                        </div>

                        <div class="form-group">
                            <input id="signup-email" type="email" name="email" placeholder=" "
                                value="{{ signup_email|default:'' }}" required>
                            <label>Email</label>
                            <div id="emailMsg" class="validation-msg"></div>
                        </div>

                        <div class="form-group password-group">
                            <input id="signup-password" type="password" name="password" placeholder=" "
                                autocomplete="new-password" required>
                            <label>Password</label>
                            <span class="fa fa-fw fa-eye field-icon toggle-password"></span>
                            <div id="passwordMsg" class="validation-msg"></div>
                        </div>

                        <div class="form-group password-group">
                            <input id="signup-confirm-password" type="password" name="confirm_password" placeholder=" "
                                autocomplete="new-password" required>
                            <label>Confirm Password</label>
                            <span class="fa fa-fw fa-eye field-icon toggle-password"></span>
                            <div id="confirmPasswordMsg" class="validation-msg"></div>
                        </div>

                        <div class="form-group">
                            <input id="signup-fullname" type="text" name="fullname" placeholder=" "
                                value="{{ signup_fullname|default:'' }}" required>
                            <label>Full Name</label>
                        </div>

                        <button type="submit" id="submitBtn">Register</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="right-section">
            <div
                style="background: white; padding: 30px; border-radius: 12px; display: flex; justify-content: center; align-items: center; margin-bottom: 40px;">
                <img src="https://d1s24u4ln0wd0i.cloudfront.net/website/new_ecom_asset/logo1.webp" alt="Medkart Logo"
                    style="max-width: 180px; height: auto;">
            </div>
            <h2
                style="color: rgba(255,255,255,0.9); font-size: 28px; margin-bottom: 40px; font-weight: 300; font-family: 'Playfair Display', serif; letter-spacing: 1px;">
                Task Management System</h2>
            <p
                style="text-align: center; color: rgba(255,255,255,0.85); font-size: 16px; max-width: 500px; line-height: 1.8;">
                Manage your projects and tasks efficiently. Track progress, collaborate with your team, and stay
                organized with our powerful task management system.
            </p>
        </div>
    </div>

</body>

</html>